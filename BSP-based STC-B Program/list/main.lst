C51 COMPILER V9.51   MAIN                                                                  09/16/2021 09:34:43 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\output\main.obj
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE source\main.c BROWSE INCDIR(.\inc) DEBUG OBJECTEXTEND PRINT(.\list\main.lst
                    -) TABS(2) OBJECT(.\output\main.obj)

line level    source

   1          /******************  STCBSP²âÊÔDemo£ºSTC_DemoV3 *************************** 
   2          STCBSPÌá¹©µÄµ×²ãÖ§³ÖºÍÓ¦ÓÃ²ãº¯ÊıÖ§³ÖÒÔÏÂ"STC-BÑ§Ï°°å"¹¦ÄÜÍ¬Ê±¹¤×÷£º
   3                1£¬ÊıÂë¹ÜÏÔÊ¾
   4              2£¬LEDÖ¸Ê¾µÆÏÔÊ¾
   5              3£¬ÊµÊ±Ê±ÖÓ
   6              4£¬ÎÂ¶È¹âÕÕ²âÁ¿
   7              5£¬ÒôÀÖ²¥·Å
   8              6£¬FMÊÕÒô»ú
   9              7£¬EXTÀ©Õ¹½Ó¿Ú£¨µç×Ó³Ó¡¢³¬Éù²¨²â¾à¡¢Ğı×ª±àÂëÆ÷¡¢PWM¿ØÖÆ£¬4Ñ¡1¹¤×÷£©
  10              8£¬Õñ¶¯´«¸ĞÆ÷
  11              9£¬»ô¶û´«¸ĞÆ÷
  12              10£¬²½½øµç»ú¿ØÖÆ
  13              11£¬´®¿Ú1Í¨ĞÅ
  14              12£¬´®¿Ú2Í¨ĞÅ£¨485¡¢EXTÀ©Õ¹½Ó¿Ú£¬2Ñ¡1£©
  15              13£¬ºìÍâÒ£¿Ø
  16              14£¬ºìÍâÊÕ·¢Í¨ĞÅ
  17              15£¬·ÇÒ×Ê§ĞÔNVM´æ´¢£¨DS1302Ìá¹©31×Ö½Ú£¬M24C02Ìá¹©256×Ö½Ú£©
  18          ¾ßÌåÊ¹ÓÃ·½·¨Çë²Î¼û¸÷Ä£¿éÍ·ÎÄ¼ş¡£
  19          
  20          ±¾STC_DemoV3Ê¾Àı³ÌĞò£¨Ô´³ÌĞòÓÉmain.c¡¢main.h¡¢function.cÈı²¿·Ö×é³É£©¹¦ÄÜÃèÊöÈçÏÂ£º     
  21              1£¬°´¼üKey2ÇĞ»»"ÏÔÊ¾"ºÍ"°´¼ü²Ù×÷"Ä£Ê½¡£Ä£Ê½ÖµÔÚLEDÉÏÏÔÊ¾£¨¶ş½øÖÆÊı£©¡£Ä£Ê½ÓĞ£º
  22                     Ä£Ê½1£ºÊµÊ±Ê±ÖÓ£¨ÄêÔÂÈÕ£©
  23                     Ä£Ê½2£ºÊµÊ±Ê±ÖÓ£¨Ê±·ÖÃë£©
  24                     Ä£Ê½3£ºÎÂ¶È¡¢¹âÕÕ²âÁ¿
  25                     Ä£Ê½4£ºÒôÀÖ²¥·Å
  26                     Ä£Ê½5£ºFMÊÕÒô»ú
  27                     Ä£Ê½6£º³¬Éù²¨²â¾à£¨ĞèÒªÔÚEXTÉÏ½Ó³¬Éù²¨²â¾àÄ£¿é£©
  28                     Ä£Ê½7£ºµç×Ó³Ó    £¨ĞèÒªÔÚEXTÉÏ½Óµç×Ó³ÓÄ£¿é£©
  29              2£¬ÊıÂë¹ÜÏÔÊ¾¡¢µ¼º½°´¼ü¹¦ÄÜ£º
  30                     ÔÚÄ£Ê½1ÏÂ£ºÊıÂë¹ÜÏÔÊ¾ÊµÊ±Ê±ÖÓRTC   "ÄêÄê-ÔÂÔÂ-ÈÕÈÕ"£¬µ¼º½°´¼ü "ÖĞ"¼ü ½øÈë»òÍË³ö"ÉèÖÃÄêÔÂÈÕ"£»"ÉÏ¡
             -¢ÏÂ¡¢×ó¡¢ÓÒ"ÉèÖÃ
  31                     ÔÚÄ£Ê½2ÏÂ£ºÊıÂë¹ÜÏÔÊ¾ÊµÊ±Ê±ÖÓRTC   "Ê±Ê±-·Ö·Ö-ÃëÃë"£¬µ¼º½°´¼ü "ÖĞ"¼ü ½øÈë»òÍË³ö"ÉèÖÃÊ±·ÖÃë"£»"ÉÏ¡
             -¢ÏÂ¡¢×ó¡¢ÓÒ"ÉèÖÃ
  32                     ÔÚÄ£Ê½3ÏÂ£ºÊıÂë¹ÜÏÔÊ¾ÎÂ¶È¡¢¹âÕÕADÖµ"ÎÂÎÂÎÂ  ¹â¹â¹â", µ¼º½°´¼üÎŞ²Ù×÷
  33                     ÔÚÄ£Ê½4ÏÂ£ºÊıÂë¹ÜÏÔÊ¾      "½ÚÅÄÂÊ  Òôµ÷Òô¸ß  Òô·û"£¬µ¼º½°´¼ü "ÖĞ"¼ü ÔİÍ£/²¥·Å£¬"ÉÏ¡¢ÏÂ"µ÷ÕûÒôµ÷£¬"×
             -ó¡¢ÓÒ"µ÷Õû½ÚÅÄÂÊ
  34                     ÔÚÄ£Ê½5ÏÂ£ºÊıÂë¹ÜÏÔÊ¾      "ÒôÁ¿   ÊÕÒôÆµÂÊ£¨MHz£©"£¬µ¼º½°´¼ü "ÖĞ"¼ü ±£´æµ±Ç°ÊÕÒô²ÎÊıµ½NVM£¨ÏÂ´
             -ÎÉÏµçÊ±£¬ÓÃ¸Ã²ÎÊıÊÕÒô£©
  35                                                                                   "ÉÏ¡¢ÏÂ"µ÷ÕûÒôÁÁ£¬"×ó¡¢ÓÒ"µ÷ÕûÊÕÒôÆµÂÊ
  36                     ÔÚÄ£Ê½6ÏÂ£ºÊıÂë¹ÜÏÔÊ¾       "       ¾àÀëÖµ£¨cm£©"  £¬µ¼º½°´¼üÎŞ²Ù×÷ 
  37                     ÔÚÄ£Ê½7ÏÂ£ºÊıÂë¹ÜÏÔÊ¾       "³ÆÖØADCÖµ£¨·ûºÅÊı£©"  £¬µ¼º½°´¼üÎŞ²Ù×÷  
  38               3£¬°´¼ü1£¨°´ÏÂÊ±£©£ººìÍâÏòÍâ·¢ËÍ "´ó¼ÒºÃ£¡"¡£ÆäËü"STC-BÑ§Ï°°å"£¨ÈçÓÃ±¾³ÌĞò£©ÓÃ´®¿ÚÖúÊÖ£¨ÉèÖÃ²¨ÌØÂÊ120
             -0bps£¬ÎÄ±¾½ÓÊÕ·½Ê½£©¿É¿´µ½½ÓÊÕµ½µÄ"´ó¼ÒºÃ£¡"ÎÄ±¾    
  39                  °´¼ü3£¨Ì§ÆğÊ±£©£º´®¿Ú1Ïò¼ÆËã»ú·¢ËÍ ³ÌĞòÔËĞĞĞÔÄÜ²ÎÊı¡£ĞÔÄÜ²ÎÊıÃèÊö£º³ÌĞòÖ÷Ñ­»·Ã¿Ãë´ÎÊı¡¢Ã¿ÃëÓÃ»§³ÌĞ
             -òµ÷¶È¶ªÊ§Êı   
  40               4£¬Õñ¶¯´«¸ĞÆ÷£º£¨Èç¹ûÓĞÒôÀÖ²¥·Å£©¿ØÖÆÒôÀÖ²¥·Å"ÔİÍ£/¼ÌĞø"
  41               5£¬»ô¶û´«¸ĞÆ÷£ºÓĞ´Å³¡½Ó½üÊ±£¬£¨Èç¹û·äÃùÆ÷¿ÕÏĞ£©·¢Éù±¨¾¯£¨1350Hz£¬·¢1ÃëÊ±¼ä£©
  42               6£¬´®¿Ú1£ºÓë¼ÆËã»úË«ÏòÍ¨ĞÅ£¨²¨ÌØÂÊ1200bps£©
  43                         Èç¹ûÊÕµ½Ò»¸ö"AA 55"¿ªÍ·¡¢´óĞ¡8×Ö½ÚÊı¾İ°ü£¬Ôò½«µÚ7×Ö½Ú+1£¬ÔÙÒÔ²¨ÌØÂÊ2400bpsÏò´®¿Ú2£¨485¡¢EXT¿É
             -Ñ¡£©×ª·¢´ËÊı¾İ°ü
  44                         Èç¹ûºìÍâ½Ó¿ÚÊÕµ½Êı¾İ°ü£¨Òıµ¼Âë+Êı¾İ+½áÊøÂë£©£¬ÔòÏò´®¿Ú1×ª·¢
  45               7£¬´®¿Ú2£º¿ÉÑ¡Ôñ485£¨Ë«Ïòµ¥¹¤£©¡¢EXT£¨TTL Uart£¬Ë«ÏòË«¹¤£©Á½¸öÎ»ÖÃ£¬¹¤×÷²¨ÌØÂÊ2400bps
  46                         Èç¹ûÊÕµ½Ò»¸ö"AA 55"¿ªÍ·¡¢´óĞ¡8×Ö½ÚÊı¾İ°ü£¬Ôò½«µÚ7×Ö½Ú+2£¬ÔÙÏòºìÍâIr¿Ú×ª·¢´ËÊı¾İ°ü£¨NEC_R05d±à
             -ÂëĞ­Òé£©
C51 COMPILER V9.51   MAIN                                                                  09/16/2021 09:34:43 PAGE 2   

  47               8£¬ºìÍâÊÕ·¢½Ó¿Ú£º
  48                         Èç¹ûºìÍâ½Ó¿ÚÊÕµ½Êı¾İ°ü£¨Òıµ¼Âë+Êı¾İ+½áÊøÂë£©£¬Ôò·äÃùÆ÷·¢Éù£¨1000Hz£¬300mS£©£¬²¢Ïò´®¿Ú1×ª·¢£»
  49                         Èç¹ûÊı¾İ°ü°üÍ·Îª"AA 55"£¬²¢£ºµÚ3×Ö½ÚÎª F1£¬Ôòµ÷ÕûÊÕÒôÆµÂÊ£¨µÚ4¡¢5×Ö½Ú£¬BCDÂë£¬ÊÕÒôÆµÂÊÖµ£¬0
             -.1MHz£©£¨Êı¾İĞèÓĞĞ§£º887¡«1080£©£¬
  50                                                                              ÒôÁ¿£¨µÚ6×Ö½ÚÊı¾İ£©£¨Êı¾İĞèÓĞĞ§£º0¡«15£©     
             -  £¬µÚ7×Ö½Ú+4
  51                                                      µÚ3×Ö½ÚÎª F2£¬Ôòµ÷ÕûRTCÊ±·ÖÃë£¨µÚ4¡¢5¡¢6×Ö½ÚÊı¾İ£¬BCDÂë£©£¨Êı¾İĞèÓĞĞ§
             -£©£¬µÚ7×Ö½Ú+4
  52                                                      µÚ3×Ö½ÚÎª F3£¬Ôòµ÷ÕûRTCÄêÔÂÈÕ£¨µÚ4¡¢5¡¢6×Ö½ÚÊı¾İ£¬BCDÂë£©£¨Êı¾İĞèÓĞĞ§£©£¬µÚ7×Ö½Ú+4
  53                                                  µ÷ÕûÖµ´æÈëNVM£¬
  54                                                  ·äÃùÆ÷·¢Éù£¨1000Hz£¬600mS£©
  55                                                  ²¢Ïò´®¿Ú1×ª·¢£»
  56          
  57          Éè¼Æ£ºĞì³É£¨µç»°£º18008400450£©    2021Äê9ÔÂ5ÈÕ
  58          **********************************************************************************************************
             -*****************/
  59          
  60          //******* ÓÃ»§³ÌĞò¶Î1£ºÓÃ»§³ÌĞò°üº¬ÎÄ¼ş *************//
  61          #include "main.H" //±ØĞë¡£±àĞ´Ó¦ÓÃ³ÌĞòÊ±£¬½öĞè¸ÄĞ´ main.h ºÍ main.cÎÄ¼ş
  62          
  63          //******* ÓÃ»§³ÌĞò¶Î2£ºÓÃ»§×Ô¶¨Òå²ÎÊıÇø *************//
  64          #define A 0.1
  65          #define B 0.25
  66          #define C 0.6
  67          #define D 1
  68          unsigned int temp_mid = 30;
  69          unsigned int temp_range = 10;
  70          unsigned int rop_mid = 40;
  71          unsigned int rop_range = 25;
  72          
  73          //******* ÓÃ»§³ÌĞò¶Î3£ºÓÃ»§×Ô¶¨Òåº¯ÊıÉùÃ÷ *************//
  74          unsigned char dist(unsigned int a, unsigned int b);
  75          unsigned char gradingStd(unsigned int curr, unsigned int range);
  76          void editRxdByTemp_Rop(unsigned int u, unsigned char idx);
  77          
  78          //******* ÓÃ»§³ÌĞò¶Î4£ºÓÃ»§³ÌĞòÈ«¾Ö±äÁ¿¶¨Òå *************//
  79          struct_DS1302_RTC t = {0x30, 0, 9, 0x06, 9, 1, 0x21}; //¾ÙÀı¡£ ÊµÊ±Ê±ÖÓÊı¾İ½á¹¹£ºÃë¡¢·Ö¡¢Ê±¡¢ÈÕ¡¢ÔÂ¡¢ÖÜ¡¢Ä
             -ê¡£³õÖµ£º2021Äê9ÔÂ6ÈÕ£¬ÖÜÒ»£¬9£º00£º30
  80          struct_SysPerF SysPer;                  //¾ÙÀı¡£ ÏµÍ³ĞÔÄÜÊı¾İ½á¹¹£ºÃ¿ÃëÖ÷Ñ­»·´ÎÊı4×Ö½Ú¡¢Ã¿ÃëÂÖÑ¯¶ªÊ§´ÎÊı1×Ö½Ú
  81          struct_ADC ADCresult;                 //¾ÙÀı¡£ ÈÈÃô¡¢¹âÃô²âÁ¿ADÖµ
  82          unsigned char Music_tone, Music_PM;           //¾ÙÀı¡£ ÒôÀÖ²¥·ÅÒôµ÷¡¢½Ú´Õ£¨Ã¿·ÖÖÓ½ÚÅÄÊı£©
  83          
  84          unsigned char rxd[8];          //¾ÙÀı¡£Í¨ĞÅ£¨´®¿Ú1¡¢´®¿Ú2¡¢ºìÍâ¹²ÓÃ£©»º³åÇø8×Ö½Ú
  85          unsigned char rxdhead[2] = {0xaa, 0x55}; //¾ÙÀı¡£Í¨ĞÅ£¨´®¿Ú1¡¢´®¿Ú2£©½ÓÊÕ°üÍ·Æ¥Åä×Ö·û2×Ö½Ú£º£¨0xAA£¬0x55£©
  86          
  87          unsigned char funcmode; //¾ÙÀı¡£¶¨ÒåÏÔÊ¾¡¢°´¼ü¹¦ÄÜÄ£Ê½
  88          enum funcname
  89          {
  90            MainPage = 1, // main page
  91            RTC_YMD,    //¾ÙÀı¡£¹¦ÄÜÄ£Ê½ÃüÃû¡£ÊµÊ±Ê±ÖÓ£ºÄêÔÂÈÕ
  92            RTC_HMS,    //                    ÊµÊ±Ê±ÖÓ£ºÊ±·ÖÃë
  93            Rt_Rop,     //                    ÈÈÃô¹âÃô²âÁ¿
  94            Weight,
  95          
  96          };             //                    µç×Ó³Ó
  97          unsigned char tempadj; //¾ÙÀı¡£³ÌĞò±äÁ¿¡£µ÷ÕûÊ±ÖÓÊ±ÓÃ£º=1 µ÷Äê»òÊ±£»=2 µ÷ÔÂ»ò·Ö =3 µ÷ÈÕ »òÃë
  98          
  99          // struct warningStatistics
 100          // {
 101          //  unsigned char warningCnt;
 102          // };
 103          
C51 COMPILER V9.51   MAIN                                                                  09/16/2021 09:34:43 PAGE 3   

 104          unsigned int temp, rop;
 105          int valOfWeight, stdWeight;
 106          
 107          //******* ÓÃ»§³ÌĞò¶Î5£ºÓÃ»§×Ô¶¨Òåº¯ÊıÔ­ĞÍ *************//
 108          #include "function.c"
 109          
 110          void myUart1Rxd_callback() //¾ÙÀı¡£´®¿Ú1ÊÕµ½ºÏ·¨Êı¾İ°ü»Øµ÷º¯Êı¡££¨ºÏ·¨Êı¾İ°ü£ºAA£¬55£¬......¡£¹²8×Ö½Ú£©
 111          {
 112   1        if (GetUart2TxStatus() == enumUart2TxFree)
 113   1        {
 114   2          (*(rxd + 6)) += 1;         //µÚ7×Ö½Ú¼Ó1
 115   2          Uart2Print(&rxd, sizeof(rxd)); //½«Êı¾İ°ü´Ó´®¿Ú2(485¡¢»òEXTÀ©Õ¹½Ó¿ÚÉÏ)·¢ËÍ³öÈ¥
 116   2        }
 117   1      }
 118          
 119          void myUart2Rxd_callback() //¾ÙÀı¡£´®¿Ú2ÊÕµ½ºÏ·¨Êı¾İ°ü»Øµ÷º¯Êı¡££¨ºÏ·¨Êı¾İ°ü£ºAA£¬55£¬......¡£¹²8×Ö½Ú£©
 120          {
 121   1        if (GetIrStatus() == enumIrFree)
 122   1        {
 123   2          (*(rxd + 6)) += 2;      //µÚ7×Ö½Ú¼Ó2
 124   2          IrPrint(&rxd, sizeof(rxd)); //½«Êı¾İ°ü´ÓºìÍâ·¢ËÍ³öÈ¥
 125   2        }
 126   1      }
 127          
 128          void myIrRxd_callback() //¾ÙÀı¡£ºìÍâÊÕµ½Êı¾İ°ü»Øµ÷º¯Êı¡££¨ÓĞºìÍâÇ°µ¼+Êı¾İ+½áÊø£¬NEC_R05d±àÂë£©
 129          {
 130   1        dealwithIrRxd();
*** WARNING C206 IN LINE 130 OF source\main.c: 'dealwithIrRxd': missing function-prototype
 131   1      }
 132          
 133          void my1mS_callback() //¾ÙÀı¡£1mSÊÂ¼ş»Øµ÷º¯Êı
 134          {
 135   1      }
 136          
 137          void my10mS_callback() //¾ÙÀı¡£10mSÊÂ¼ş»Øµ÷º¯Êı
 138          {
 139   1      }
 140          
 141          void my100mS_callback() //¾ÙÀı¡£100mSÊÂ¼ş»Øµ÷º¯Êı
 142          {
 143   1        temp = ADCresult.Rt;
 144   1        rop = ADCresult.Rop;
 145   1        rop = rop > 255 ? 255 : rop;
 146   1        dealwithDisp();
 147   1      }
 148          
 149          void my1S_callback() //¾ÙÀı¡£1SÊÂ¼ş»Øµ÷º¯Êı
 150          {
 151   1        // SetBeep(1000,20);
 152   1        editRxdByTemp_Rop(temp / 15, 1);
 153   1        editRxdByTemp_Rop(rop, 2);
 154   1        Uart1Print(&rxd, sizeof(rxd));
 155   1      }
 156          
 157          void myADC_callback() //¾ÙÀı¡£ADCÊÂ¼ş»Øµ÷º¯Êı
 158          {
 159   1      }
 160          
 161          void myKN_callback() //¾ÙÀı¡£µ¼º½°´¼üÊÂ¼ş»Øµ÷º¯Êı
 162          {
 163   1        dealwithmyKN();
 164   1      }
C51 COMPILER V9.51   MAIN                                                                  09/16/2021 09:34:43 PAGE 4   

 165          
 166          void mykey_callback() // °´¼ü£¨Key1¡¢Key2£©ÊÂ¼ş»Øµ÷º¯Êı
 167          {
 168   1        dealwithmykey();
 169   1      }
 170          
 171          void myhall_callback() //Ê¾Àı¡£ÓĞhallÊÂ¼ş»Øµ÷º¯Êı£º·¢Éù±¨¾¯
 172          {
 173   1        if (GetHallAct() == enumHallGetClose)
 174   1          SetBeep(1350, 100);
 175   1      }
 176          
 177          unsigned char dist(unsigned int a, unsigned int b)
 178          {
 179   1        // unsigned int max = a > b ? a : b, min = a < b ? a : b;
 180   1        return (a > b ? a : b) - (a < b ? a : b);
 181   1      }
 182          
 183          // unsigned char gradingStd(unsigned int curr, unsigned int range)
 184          // {
 185          //  if (curr <= range * A)      return 10;
 186          //  else if (curr <= range * B)   return 11;
 187          //  else if (curr <= range * C)   return 12;
 188          //  else              return 13;
 189          // }
 190          
 191          void editRxdByTemp_Rop(unsigned int u, unsigned char idx)
 192          {
 193   1        unsigned char table[6] = {'a', 'b', 'c', 'd', 'e', 'f'};
 194   1        if (u > 255)    return ;
 195   1        rxd[2 * idx] = (u / 16 % 16 > 9) ? table[(u / 16 % 16) - 10] : u / 16 % 16;
 196   1        rxd[2 * idx + 1] = u % 16 > 9 ? table[(u % 16) - 10] : u % 16;
 197   1      }
 198          
 199          
 200          //******* main()º¯Êı *************//
 201          void main() //Ö÷º¯Êı main() ¿ªÊ¼         //´ËĞĞ±ØĞë£¡£¡£¡
 202          {
 203   1      
 204   1        //******* ÓÃ»§³ÌĞò¶Î6£ºÓÃ»§main()º¯ÊıÄÚ²¿¾Ö²¿±äÁ¿¶¨Òå *************//
 205   1      
 206   1        //******* ÓÃ»§³ÌĞò¶Î7£ºÓÃ»§main()º¯Êı£¨³õÊ¼»¯Àà³ÌĞò£© *************//
 207   1        //1,¼ÓÔØĞèÒªÓÃµÄÄ£¿é(ÓÉ¸÷Ä£¿éÌá¹©¼ÓÔØº¯Êı)
 208   1        Key_Init();     //¾ÙÀı£¬ĞèÒªÓÃµ½µÄÄ£¿é¼°Æäº¯Êı¡¢·½·¨£¬±ØĞë¶ÔÆä³õÊ¼»¯£¨ÈÃÆä×¼±¸¡¢¾ÍĞ÷ºÍÏìÓ¦×öºóÌ¨·şÎñ£©
 209   1        HallInit();     //¾ÙÀı
 210   1        VibInit();      //¾ÙÀı
 211   1        DisplayerInit();  //¾ÙÀı
 212   1        // BeepInit();      //¾ÙÀı
 213   1        AdcInit(ADCexpEXT); //¾ÙÀı£¬ADCÄ£¿é³õÊ¼»¯£¬ÓĞ²ÎÊı£¬Ñ¡ÔñÀ©Õ¹½Ó¿ÚEXTÉÏP1.0¡¢P1.1ÊÇ·ñÒ²×öADC¹¦ÄÜ
 214   1        DS1302Init(t);    //¾ÙÀı£¬DS1302³õÊ¼»¯
 215   1      
 216   1        IrInit(NEC_R05d); //¾ÙÀı£¬ºìÍâ½Ó¿ÚÉèÖÃ
 217   1                  /******* ÒÔÏÂ¿É4Ñ¡1£º¼ÓÔØEXT½Ó¿Ú ********/
 218   1                  //    EXTInit(enumEXTWeight);                          //¾ÙÀı£¬EXT³õÊ¼»¯³Éµç×Ó³Ó¹¦ÄÜ
 219   1                  //    EXTInit(enumEXTPWM);                             //¾ÙÀı£¬EXT³õÊ¼»¯³ÉÁ½Â·PWM¹¦ÄÜ
 220   1                  //    EXTInit(enumEXTDecode);                          //¾ÙÀı£¬EXT³õÊ¼»¯³ÉÔöÁ¿Ê½±àÂëÆ÷½âÂë¹¦ÄÜ£¨Èç£
             -ºĞı×ª±àÂëÆ÷£©
 221   1                  //    EXTInit(enumEXTUltraSonic);                      //¾ÙÀı£¬EXT³õÊ¼»¯³É³¬Éù²¨²â¾à¹¦ÄÜ
 222   1        Uart1Init(4800);  //¾ÙÀı£¬´®¿Ú1³õÊ¼»¯£¬ÓĞ²ÎÊı£¬ÉèÖÃUart1Í¨ĞÅ²¨ÌØÂÊ
 223   1        /******* ÒÔÏÂ¿É2Ñ¡1£º¼ÓÔØ´®¿Ú2 ********/
 224   1        Uart2Init(2400, Uart2Usedfor485); //¾ÙÀı£¬´®¿Ú2³õÊ¼»¯µ½485½Ó¿Ú£¨RS485¹¤ÒµÏÖ³¡×ÜÏß£¬°ëË«¹¤£©
 225   1                          //    Uart2Init(2400,Uart2UsedforEXT);               //¾ÙÀı£¬´®¿Ú2³õÊ¼»¯µ½EXT½Ó¿Ú£¨TTL Uart´®ĞĞ
C51 COMPILER V9.51   MAIN                                                                  09/16/2021 09:34:43 PAGE 5   

             -Í¨ĞÅ¿Ú£©
 226   1      
 227   1        //2,ÉèÖÃÊÂ¼ş»Øµ÷º¯Êı(ÓÉsysÌá¹©ÉèÖÃº¯ÊıSetEventCallBack())
 228   1        SetEventCallBack(enumEventKey, mykey_callback);       //¾ÙÀı
 229   1        SetEventCallBack(enumEventSys1mS, my1mS_callback);      //¾ÙÀı
 230   1        SetEventCallBack(enumEventSys10mS, my10mS_callback);    //¾ÙÀı
 231   1        SetEventCallBack(enumEventSys100mS, my100mS_callback);    //¾ÙÀı
 232   1        SetEventCallBack(enumEventSys1S, my1S_callback);      //¾ÙÀı
 233   1        SetEventCallBack(enumEventHall, myhall_callback);     //¾ÙÀı
 234   1        SetEventCallBack(enumEventNav, myKN_callback);        //¾ÙÀı£¬ÉèÖÃµ¼º½°´¼ü»Øµ÷º¯Êı
 235   1        SetEventCallBack(enumEventXADC, myADC_callback);      //À©Õ¹½Ó¿ÚÉÏĞÂµÄADÖµÊÂ¼ş
 236   1      
 237   1        //3,ÓÃ»§³ÌĞò×´Ì¬³õÊ¼»¯
 238   1        SetDisplayerArea(0, 7);                   //¾ÙÀı
 239   1        SetUart1Rxd(&rxd, sizeof(rxd), rxdhead, sizeof(rxdhead)); //ÉèÖÃ´®¿Ú½ÓÊÕ·½Ê½£ºÊı¾İ°üÌõ¼ş£º½ÓÊÕÊı¾İ°ü·ÅÖÃÔ
             -ÚrxdÖĞ£¬Êı¾İ°ü´óĞ¡rxd´óĞ¡£¬Êı¾İ°üÍ·ĞèÒªÓërxdheadÆ¥Åä£¬Æ¥ÅäÊıÁ¿rxdhead´óĞ¡
 240   1        SetUart2Rxd(&rxd, sizeof(rxd), rxdhead, sizeof(rxdhead));
 241   1        SetIrRxd(&rxd); //¾ÙÀı
 242   1      
 243   1        //4,ÓÃ»§³ÌĞò±äÁ¿³õÊ¼»¯
 244   1      
 245   1        funcmode = M24C02_Read(0x00);
 246   1        LedPrint(funcmode);
 247   1      
 248   1        /*****************  MySTC_OS ³õÊ¼»¯Óë¼ÓÔØ¿ªÊ¼  ********************************/
 249   1        MySTC_Init(); // MySTC_OS ³õÊ¼»¯         //´ËĞĞ±ØĞë£¡£¡£¡
 250   1        while (1)   // ÏµÍ³Ö÷Ñ­»·              //´ËĞĞ±ØĞë£¡£¡£¡
 251   1        {
 252   2          MySTC_OS(); // MySTC_OS ¼ÓÔØ           //´ËĞĞ±ØĞë£¡£¡£¡
 253   2                /*****************  MySTC_OS ³õÊ¼»¯Óë¼ÓÔØ½áÊø  ********************************/
 254   2      
 255   2          //******* ÓÃ»§³ÌĞò¶Î8£ºÓÃ»§main()º¯Êı£¨Ö÷Ñ­»·³ÌĞò£© *************//
 256   2      
 257   2        } //Ö÷Ñ­»·while(1)½áÊø         //´ËĞĞ±ØĞë£¡£¡£¡
 258   1      } //Ö÷º¯Êı main() ½áÊø         //´ËĞĞ±ØĞë£¡£¡£¡


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1627    ----
   CONSTANT SIZE    =     36    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     53      18
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
