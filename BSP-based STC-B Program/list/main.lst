C51 COMPILER V9.51   MAIN                                                                  09/16/2021 09:34:43 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\output\main.obj
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE source\main.c BROWSE INCDIR(.\inc) DEBUG OBJECTEXTEND PRINT(.\list\main.lst
                    -) TABS(2) OBJECT(.\output\main.obj)

line level    source

   1          /******************  STCBSP²âÊÔDemo£ºSTC_DemoV3 *************************** 
   2          STCBSPÌá¹©µÄµ×²ãÖ§³ÖºÍÓ¦ÓÃ²ãº¯ÊýÖ§³ÖÒÔÏÂ"STC-BÑ§Ï°°å"¹¦ÄÜÍ¬Ê±¹¤×÷£º
   3                1£¬ÊýÂë¹ÜÏÔÊ¾
   4              2£¬LEDÖ¸Ê¾µÆÏÔÊ¾
   5              3£¬ÊµÊ±Ê±ÖÓ
   6              4£¬ÎÂ¶È¹âÕÕ²âÁ¿
   7              5£¬ÒôÀÖ²¥·Å
   8              6£¬FMÊÕÒô»ú
   9              7£¬EXTÀ©Õ¹½Ó¿Ú£¨µç×Ó³Ó¡¢³¬Éù²¨²â¾à¡¢Ðý×ª±àÂëÆ÷¡¢PWM¿ØÖÆ£¬4Ñ¡1¹¤×÷£©
  10              8£¬Õñ¶¯´«¸ÐÆ÷
  11              9£¬»ô¶û´«¸ÐÆ÷
  12              10£¬²½½øµç»ú¿ØÖÆ
  13              11£¬´®¿Ú1Í¨ÐÅ
  14              12£¬´®¿Ú2Í¨ÐÅ£¨485¡¢EXTÀ©Õ¹½Ó¿Ú£¬2Ñ¡1£©
  15              13£¬ºìÍâÒ£¿Ø
  16              14£¬ºìÍâÊÕ·¢Í¨ÐÅ
  17              15£¬·ÇÒ×Ê§ÐÔNVM´æ´¢£¨DS1302Ìá¹©31×Ö½Ú£¬M24C02Ìá¹©256×Ö½Ú£©
  18          ¾ßÌåÊ¹ÓÃ·½·¨Çë²Î¼û¸÷Ä£¿éÍ·ÎÄ¼þ¡£
  19          
  20          ±¾STC_DemoV3Ê¾Àý³ÌÐò£¨Ô´³ÌÐòÓÉmain.c¡¢main.h¡¢function.cÈý²¿·Ö×é³É£©¹¦ÄÜÃèÊöÈçÏÂ£º     
  21              1£¬°´¼üKey2ÇÐ»»"ÏÔÊ¾"ºÍ"°´¼ü²Ù×÷"Ä£Ê½¡£Ä£Ê½ÖµÔÚLEDÉÏÏÔÊ¾£¨¶þ½øÖÆÊý£©¡£Ä£Ê½ÓÐ£º
  22                     Ä£Ê½1£ºÊµÊ±Ê±ÖÓ£¨ÄêÔÂÈÕ£©
  23                     Ä£Ê½2£ºÊµÊ±Ê±ÖÓ£¨Ê±·ÖÃë£©
  24                     Ä£Ê½3£ºÎÂ¶È¡¢¹âÕÕ²âÁ¿
  25                     Ä£Ê½4£ºÒôÀÖ²¥·Å
  26                     Ä£Ê½5£ºFMÊÕÒô»ú
  27                     Ä£Ê½6£º³¬Éù²¨²â¾à£¨ÐèÒªÔÚEXTÉÏ½Ó³¬Éù²¨²â¾àÄ£¿é£©
  28                     Ä£Ê½7£ºµç×Ó³Ó    £¨ÐèÒªÔÚEXTÉÏ½Óµç×Ó³ÓÄ£¿é£©
  29              2£¬ÊýÂë¹ÜÏÔÊ¾¡¢µ¼º½°´¼ü¹¦ÄÜ£º
  30                     ÔÚÄ£Ê½1ÏÂ£ºÊýÂë¹ÜÏÔÊ¾ÊµÊ±Ê±ÖÓRTC   "ÄêÄê-ÔÂÔÂ-ÈÕÈÕ"£¬µ¼º½°´¼ü "ÖÐ"¼ü ½øÈë»òÍË³ö"ÉèÖÃÄêÔÂÈÕ"£»"ÉÏ¡
             -¢ÏÂ¡¢×ó¡¢ÓÒ"ÉèÖÃ
  31                     ÔÚÄ£Ê½2ÏÂ£ºÊýÂë¹ÜÏÔÊ¾ÊµÊ±Ê±ÖÓRTC   "Ê±Ê±-·Ö·Ö-ÃëÃë"£¬µ¼º½°´¼ü "ÖÐ"¼ü ½øÈë»òÍË³ö"ÉèÖÃÊ±·ÖÃë"£»"ÉÏ¡
             -¢ÏÂ¡¢×ó¡¢ÓÒ"ÉèÖÃ
  32                     ÔÚÄ£Ê½3ÏÂ£ºÊýÂë¹ÜÏÔÊ¾ÎÂ¶È¡¢¹âÕÕADÖµ"ÎÂÎÂÎÂ  ¹â¹â¹â", µ¼º½°´¼üÎÞ²Ù×÷
  33                     ÔÚÄ£Ê½4ÏÂ£ºÊýÂë¹ÜÏÔÊ¾      "½ÚÅÄÂÊ  Òôµ÷Òô¸ß  Òô·û"£¬µ¼º½°´¼ü "ÖÐ"¼ü ÔÝÍ£/²¥·Å£¬"ÉÏ¡¢ÏÂ"µ÷ÕûÒôµ÷£¬"×
             -ó¡¢ÓÒ"µ÷Õû½ÚÅÄÂÊ
  34                     ÔÚÄ£Ê½5ÏÂ£ºÊýÂë¹ÜÏÔÊ¾      "ÒôÁ¿   ÊÕÒôÆµÂÊ£¨MHz£©"£¬µ¼º½°´¼ü "ÖÐ"¼ü ±£´æµ±Ç°ÊÕÒô²ÎÊýµ½NVM£¨ÏÂ´
             -ÎÉÏµçÊ±£¬ÓÃ¸Ã²ÎÊýÊÕÒô£©
  35                                                                                   "ÉÏ¡¢ÏÂ"µ÷ÕûÒôÁÁ£¬"×ó¡¢ÓÒ"µ÷ÕûÊÕÒôÆµÂÊ
  36                     ÔÚÄ£Ê½6ÏÂ£ºÊýÂë¹ÜÏÔÊ¾       "       ¾àÀëÖµ£¨cm£©"  £¬µ¼º½°´¼üÎÞ²Ù×÷ 
  37                     ÔÚÄ£Ê½7ÏÂ£ºÊýÂë¹ÜÏÔÊ¾       "³ÆÖØADCÖµ£¨·ûºÅÊý£©"  £¬µ¼º½°´¼üÎÞ²Ù×÷  
  38               3£¬°´¼ü1£¨°´ÏÂÊ±£©£ººìÍâÏòÍâ·¢ËÍ "´ó¼ÒºÃ£¡"¡£ÆäËü"STC-BÑ§Ï°°å"£¨ÈçÓÃ±¾³ÌÐò£©ÓÃ´®¿ÚÖúÊÖ£¨ÉèÖÃ²¨ÌØÂÊ120
             -0bps£¬ÎÄ±¾½ÓÊÕ·½Ê½£©¿É¿´µ½½ÓÊÕµ½µÄ"´ó¼ÒºÃ£¡"ÎÄ±¾    
  39                  °´¼ü3£¨Ì§ÆðÊ±£©£º´®¿Ú1Ïò¼ÆËã»ú·¢ËÍ ³ÌÐòÔËÐÐÐÔÄÜ²ÎÊý¡£ÐÔÄÜ²ÎÊýÃèÊö£º³ÌÐòÖ÷Ñ­»·Ã¿Ãë´ÎÊý¡¢Ã¿ÃëÓÃ»§³ÌÐ
             -òµ÷¶È¶ªÊ§Êý   
  40               4£¬Õñ¶¯´«¸ÐÆ÷£º£¨Èç¹ûÓÐÒôÀÖ²¥·Å£©¿ØÖÆÒôÀÖ²¥·Å"ÔÝÍ£/¼ÌÐø"
  41               5£¬»ô¶û´«¸ÐÆ÷£ºÓÐ´Å³¡½Ó½üÊ±£¬£¨Èç¹û·äÃùÆ÷¿ÕÏÐ£©·¢Éù±¨¾¯£¨1350Hz£¬·¢1ÃëÊ±¼ä£©
  42               6£¬´®¿Ú1£ºÓë¼ÆËã»úË«ÏòÍ¨ÐÅ£¨²¨ÌØÂÊ1200bps£©
  43                         Èç¹ûÊÕµ½Ò»¸ö"AA 55"¿ªÍ·¡¢´óÐ¡8×Ö½ÚÊý¾Ý°ü£¬Ôò½«µÚ7×Ö½Ú+1£¬ÔÙÒÔ²¨ÌØÂÊ2400bpsÏò´®¿Ú2£¨485¡¢EXT¿É
             -Ñ¡£©×ª·¢´ËÊý¾Ý°ü
  44                         Èç¹ûºìÍâ½Ó¿ÚÊÕµ½Êý¾Ý°ü£¨Òýµ¼Âë+Êý¾Ý+½áÊøÂë£©£¬ÔòÏò´®¿Ú1×ª·¢
  45               7£¬´®¿Ú2£º¿ÉÑ¡Ôñ485£¨Ë«Ïòµ¥¹¤£©¡¢EXT£¨TTL Uart£¬Ë«ÏòË«¹¤£©Á½¸öÎ»ÖÃ£¬¹¤×÷²¨ÌØÂÊ2400bps
  46                         Èç¹ûÊÕµ½Ò»¸ö"AA 55"¿ªÍ·¡¢´óÐ¡8×Ö½ÚÊý¾Ý°ü£¬Ôò½«µÚ7×Ö½Ú+2£¬ÔÙÏòºìÍâIr¿Ú×ª·¢´ËÊý¾Ý°ü£¨NEC_R05d±à
             -ÂëÐ­Òé£©
C51 COMPILER V9.51   MAIN                                                                  09/16/2021 09:34:43 PAGE 2   

  47               8£¬ºìÍâÊÕ·¢½Ó¿Ú£º
  48                         Èç¹ûºìÍâ½Ó¿ÚÊÕµ½Êý¾Ý°ü£¨Òýµ¼Âë+Êý¾Ý+½áÊøÂë£©£¬Ôò·äÃùÆ÷·¢Éù£¨1000Hz£¬300mS£©£¬²¢Ïò´®¿Ú1×ª·¢£»
  49                         Èç¹ûÊý¾Ý°ü°üÍ·Îª"AA 55"£¬²¢£ºµÚ3×Ö½ÚÎª F1£¬Ôòµ÷ÕûÊÕÒôÆµÂÊ£¨µÚ4¡¢5×Ö½Ú£¬BCDÂë£¬ÊÕÒôÆµÂÊÖµ£¬0
             -.1MHz£©£¨Êý¾ÝÐèÓÐÐ§£º887¡«1080£©£¬
  50                                                                              ÒôÁ¿£¨µÚ6×Ö½ÚÊý¾Ý£©£¨Êý¾ÝÐèÓÐÐ§£º0¡«15£©     
             -  £¬µÚ7×Ö½Ú+4
  51                                                      µÚ3×Ö½ÚÎª F2£¬Ôòµ÷ÕûRTCÊ±·ÖÃë£¨µÚ4¡¢5¡¢6×Ö½ÚÊý¾Ý£¬BCDÂë£©£¨Êý¾ÝÐèÓÐÐ§
             -£©£¬µÚ7×Ö½Ú+4
  52                                                      µÚ3×Ö½ÚÎª F3£¬Ôòµ÷ÕûRTCÄêÔÂÈÕ£¨µÚ4¡¢5¡¢6×Ö½ÚÊý¾Ý£¬BCDÂë£©£¨Êý¾ÝÐèÓÐÐ§£©£¬µÚ7×Ö½Ú+4
  53                                                  µ÷ÕûÖµ´æÈëNVM£¬
  54                                                  ·äÃùÆ÷·¢Éù£¨1000Hz£¬600mS£©
  55                                                  ²¢Ïò´®¿Ú1×ª·¢£»
  56          
  57          Éè¼Æ£ºÐì³É£¨µç»°£º18008400450£©    2021Äê9ÔÂ5ÈÕ
  58          **********************************************************************************************************
             -*****************/
  59          
  60          //******* ÓÃ»§³ÌÐò¶Î1£ºÓÃ»§³ÌÐò°üº¬ÎÄ¼þ *************//
  61          #include "main.H" //±ØÐë¡£±àÐ´Ó¦ÓÃ³ÌÐòÊ±£¬½öÐè¸ÄÐ´ main.h ºÍ main.cÎÄ¼þ
  62          
  63          //******* ÓÃ»§³ÌÐò¶Î2£ºÓÃ»§×Ô¶¨Òå²ÎÊýÇø *************//
  64          #define A 0.1
  65          #define B 0.25
  66          #define C 0.6
  67          #define D 1
  68          unsigned int temp_mid = 30;
  69          unsigned int temp_range = 10;
  70          unsigned int rop_mid = 40;
  71          unsigned int rop_range = 25;
  72          
  73          //******* ÓÃ»§³ÌÐò¶Î3£ºÓÃ»§×Ô¶¨Òåº¯ÊýÉùÃ÷ *************//
  74          unsigned char dist(unsigned int a, unsigned int b);
  75          unsigned char gradingStd(unsigned int curr, unsigned int range);
  76          void editRxdByTemp_Rop(unsigned int u, unsigned char idx);
  77          
  78          //******* ÓÃ»§³ÌÐò¶Î4£ºÓÃ»§³ÌÐòÈ«¾Ö±äÁ¿¶¨Òå *************//
  79          struct_DS1302_RTC t = {0x30, 0, 9, 0x06, 9, 1, 0x21}; //¾ÙÀý¡£ ÊµÊ±Ê±ÖÓÊý¾Ý½á¹¹£ºÃë¡¢·Ö¡¢Ê±¡¢ÈÕ¡¢ÔÂ¡¢ÖÜ¡¢Ä
             -ê¡£³õÖµ£º2021Äê9ÔÂ6ÈÕ£¬ÖÜÒ»£¬9£º00£º30
  80          struct_SysPerF SysPer;                  //¾ÙÀý¡£ ÏµÍ³ÐÔÄÜÊý¾Ý½á¹¹£ºÃ¿ÃëÖ÷Ñ­»·´ÎÊý4×Ö½Ú¡¢Ã¿ÃëÂÖÑ¯¶ªÊ§´ÎÊý1×Ö½Ú
  81          struct_ADC ADCresult;                 //¾ÙÀý¡£ ÈÈÃô¡¢¹âÃô²âÁ¿ADÖµ
  82          unsigned char Music_tone, Music_PM;           //¾ÙÀý¡£ ÒôÀÖ²¥·ÅÒôµ÷¡¢½Ú´Õ£¨Ã¿·ÖÖÓ½ÚÅÄÊý£©
  83          
  84          unsigned char rxd[8];          //¾ÙÀý¡£Í¨ÐÅ£¨´®¿Ú1¡¢´®¿Ú2¡¢ºìÍâ¹²ÓÃ£©»º³åÇø8×Ö½Ú
  85          unsigned char rxdhead[2] = {0xaa, 0x55}; //¾ÙÀý¡£Í¨ÐÅ£¨´®¿Ú1¡¢´®¿Ú2£©½ÓÊÕ°üÍ·Æ¥Åä×Ö·û2×Ö½Ú£º£¨0xAA£¬0x55£©
  86          
  87          unsigned char funcmode; //¾ÙÀý¡£¶¨ÒåÏÔÊ¾¡¢°´¼ü¹¦ÄÜÄ£Ê½
  88          enum funcname
  89          {
  90            MainPage = 1, // main page
  91            RTC_YMD,    //¾ÙÀý¡£¹¦ÄÜÄ£Ê½ÃüÃû¡£ÊµÊ±Ê±ÖÓ£ºÄêÔÂÈÕ
  92            RTC_HMS,    //                    ÊµÊ±Ê±ÖÓ£ºÊ±·ÖÃë
  93            Rt_Rop,     //                    ÈÈÃô¹âÃô²âÁ¿
  94            Weight,
  95          
  96          };             //                    µç×Ó³Ó
  97          unsigned char tempadj; //¾ÙÀý¡£³ÌÐò±äÁ¿¡£µ÷ÕûÊ±ÖÓÊ±ÓÃ£º=1 µ÷Äê»òÊ±£»=2 µ÷ÔÂ»ò·Ö =3 µ÷ÈÕ »òÃë
  98          
  99          // struct warningStatistics
 100          // {
 101          //  unsigned char warningCnt;
 102          // };
 103          
C51 COMPILER V9.51   MAIN                                                                  09/16/2021 09:34:43 PAGE 3   

 104          unsigned int temp, rop;
 105          int valOfWeight, stdWeight;
 106          
 107          //******* ÓÃ»§³ÌÐò¶Î5£ºÓÃ»§×Ô¶¨Òåº¯ÊýÔ­ÐÍ *************//
 108          #include "function.c"
 109          
 110          void myUart1Rxd_callback() //¾ÙÀý¡£´®¿Ú1ÊÕµ½ºÏ·¨Êý¾Ý°ü»Øµ÷º¯Êý¡££¨ºÏ·¨Êý¾Ý°ü£ºAA£¬55£¬......¡£¹²8×Ö½Ú£©
 111          {
 112   1        if (GetUart2TxStatus() == enumUart2TxFree)
 113   1        {
 114   2          (*(rxd + 6)) += 1;         //µÚ7×Ö½Ú¼Ó1
 115   2          Uart2Print(&rxd, sizeof(rxd)); //½«Êý¾Ý°ü´Ó´®¿Ú2(485¡¢»òEXTÀ©Õ¹½Ó¿ÚÉÏ)·¢ËÍ³öÈ¥
 116   2        }
 117   1      }
 118          
 119          void myUart2Rxd_callback() //¾ÙÀý¡£´®¿Ú2ÊÕµ½ºÏ·¨Êý¾Ý°ü»Øµ÷º¯Êý¡££¨ºÏ·¨Êý¾Ý°ü£ºAA£¬55£¬......¡£¹²8×Ö½Ú£©
 120          {
 121   1        if (GetIrStatus() == enumIrFree)
 122   1        {
 123   2          (*(rxd + 6)) += 2;      //µÚ7×Ö½Ú¼Ó2
 124   2          IrPrint(&rxd, sizeof(rxd)); //½«Êý¾Ý°ü´ÓºìÍâ·¢ËÍ³öÈ¥
 125   2        }
 126   1      }
 127          
 128          void myIrRxd_callback() //¾ÙÀý¡£ºìÍâÊÕµ½Êý¾Ý°ü»Øµ÷º¯Êý¡££¨ÓÐºìÍâÇ°µ¼+Êý¾Ý+½áÊø£¬NEC_R05d±àÂë£©
 129          {
 130   1        dealwithIrRxd();
*** WARNING C206 IN LINE 130 OF source\main.c: 'dealwithIrRxd': missing function-prototype
 131   1      }
 132          
 133          void my1mS_callback() //¾ÙÀý¡£1mSÊÂ¼þ»Øµ÷º¯Êý
 134          {
 135   1      }
 136          
 137          void my10mS_callback() //¾ÙÀý¡£10mSÊÂ¼þ»Øµ÷º¯Êý
 138          {
 139   1      }
 140          
 141          void my100mS_callback() //¾ÙÀý¡£100mSÊÂ¼þ»Øµ÷º¯Êý
 142          {
 143   1        temp = ADCresult.Rt;
 144   1        rop = ADCresult.Rop;
 145   1        rop = rop > 255 ? 255 : rop;
 146   1        dealwithDisp();
 147   1      }
 148          
 149          void my1S_callback() //¾ÙÀý¡£1SÊÂ¼þ»Øµ÷º¯Êý
 150          {
 151   1        // SetBeep(1000,20);
 152   1        editRxdByTemp_Rop(temp / 15, 1);
 153   1        editRxdByTemp_Rop(rop, 2);
 154   1        Uart1Print(&rxd, sizeof(rxd));
 155   1      }
 156          
 157          void myADC_callback() //¾ÙÀý¡£ADCÊÂ¼þ»Øµ÷º¯Êý
 158          {
 159   1      }
 160          
 161          void myKN_callback() //¾ÙÀý¡£µ¼º½°´¼üÊÂ¼þ»Øµ÷º¯Êý
 162          {
 163   1        dealwithmyKN();
 164   1      }
C51 COMPILER V9.51   MAIN                                                                  09/16/2021 09:34:43 PAGE 4   

 165          
 166          void mykey_callback() // °´¼ü£¨Key1¡¢Key2£©ÊÂ¼þ»Øµ÷º¯Êý
 167          {
 168   1        dealwithmykey();
 169   1      }
 170          
 171          void myhall_callback() //Ê¾Àý¡£ÓÐhallÊÂ¼þ»Øµ÷º¯Êý£º·¢Éù±¨¾¯
 172          {
 173   1        if (GetHallAct() == enumHallGetClose)
 174   1          SetBeep(1350, 100);
 175   1      }
 176          
 177          unsigned char dist(unsigned int a, unsigned int b)
 178          {
 179   1        // unsigned int max = a > b ? a : b, min = a < b ? a : b;
 180   1        return (a > b ? a : b) - (a < b ? a : b);
 181   1      }
 182          
 183          // unsigned char gradingStd(unsigned int curr, unsigned int range)
 184          // {
 185          //  if (curr <= range * A)      return 10;
 186          //  else if (curr <= range * B)   return 11;
 187          //  else if (curr <= range * C)   return 12;
 188          //  else              return 13;
 189          // }
 190          
 191          void editRxdByTemp_Rop(unsigned int u, unsigned char idx)
 192          {
 193   1        unsigned char table[6] = {'a', 'b', 'c', 'd', 'e', 'f'};
 194   1        if (u > 255)    return ;
 195   1        rxd[2 * idx] = (u / 16 % 16 > 9) ? table[(u / 16 % 16) - 10] : u / 16 % 16;
 196   1        rxd[2 * idx + 1] = u % 16 > 9 ? table[(u % 16) - 10] : u % 16;
 197   1      }
 198          
 199          
 200          //******* main()º¯Êý *************//
 201          void main() //Ö÷º¯Êý main() ¿ªÊ¼         //´ËÐÐ±ØÐë£¡£¡£¡
 202          {
 203   1      
 204   1        //******* ÓÃ»§³ÌÐò¶Î6£ºÓÃ»§main()º¯ÊýÄÚ²¿¾Ö²¿±äÁ¿¶¨Òå *************//
 205   1      
 206   1        //******* ÓÃ»§³ÌÐò¶Î7£ºÓÃ»§main()º¯Êý£¨³õÊ¼»¯Àà³ÌÐò£© *************//
 207   1        //1,¼ÓÔØÐèÒªÓÃµÄÄ£¿é(ÓÉ¸÷Ä£¿éÌá¹©¼ÓÔØº¯Êý)
 208   1        Key_Init();     //¾ÙÀý£¬ÐèÒªÓÃµ½µÄÄ£¿é¼°Æäº¯Êý¡¢·½·¨£¬±ØÐë¶ÔÆä³õÊ¼»¯£¨ÈÃÆä×¼±¸¡¢¾ÍÐ÷ºÍÏìÓ¦×öºóÌ¨·þÎñ£©
 209   1        HallInit();     //¾ÙÀý
 210   1        VibInit();      //¾ÙÀý
 211   1        DisplayerInit();  //¾ÙÀý
 212   1        // BeepInit();      //¾ÙÀý
 213   1        AdcInit(ADCexpEXT); //¾ÙÀý£¬ADCÄ£¿é³õÊ¼»¯£¬ÓÐ²ÎÊý£¬Ñ¡ÔñÀ©Õ¹½Ó¿ÚEXTÉÏP1.0¡¢P1.1ÊÇ·ñÒ²×öADC¹¦ÄÜ
 214   1        DS1302Init(t);    //¾ÙÀý£¬DS1302³õÊ¼»¯
 215   1      
 216   1        IrInit(NEC_R05d); //¾ÙÀý£¬ºìÍâ½Ó¿ÚÉèÖÃ
 217   1                  /******* ÒÔÏÂ¿É4Ñ¡1£º¼ÓÔØEXT½Ó¿Ú ********/
 218   1                  //    EXTInit(enumEXTWeight);                          //¾ÙÀý£¬EXT³õÊ¼»¯³Éµç×Ó³Ó¹¦ÄÜ
 219   1                  //    EXTInit(enumEXTPWM);                             //¾ÙÀý£¬EXT³õÊ¼»¯³ÉÁ½Â·PWM¹¦ÄÜ
 220   1                  //    EXTInit(enumEXTDecode);                          //¾ÙÀý£¬EXT³õÊ¼»¯³ÉÔöÁ¿Ê½±àÂëÆ÷½âÂë¹¦ÄÜ£¨Èç£
             -ºÐý×ª±àÂëÆ÷£©
 221   1                  //    EXTInit(enumEXTUltraSonic);                      //¾ÙÀý£¬EXT³õÊ¼»¯³É³¬Éù²¨²â¾à¹¦ÄÜ
 222   1        Uart1Init(4800);  //¾ÙÀý£¬´®¿Ú1³õÊ¼»¯£¬ÓÐ²ÎÊý£¬ÉèÖÃUart1Í¨ÐÅ²¨ÌØÂÊ
 223   1        /******* ÒÔÏÂ¿É2Ñ¡1£º¼ÓÔØ´®¿Ú2 ********/
 224   1        Uart2Init(2400, Uart2Usedfor485); //¾ÙÀý£¬´®¿Ú2³õÊ¼»¯µ½485½Ó¿Ú£¨RS485¹¤ÒµÏÖ³¡×ÜÏß£¬°ëË«¹¤£©
 225   1                          //    Uart2Init(2400,Uart2UsedforEXT);               //¾ÙÀý£¬´®¿Ú2³õÊ¼»¯µ½EXT½Ó¿Ú£¨TTL Uart´®ÐÐ
C51 COMPILER V9.51   MAIN                                                                  09/16/2021 09:34:43 PAGE 5   

             -Í¨ÐÅ¿Ú£©
 226   1      
 227   1        //2,ÉèÖÃÊÂ¼þ»Øµ÷º¯Êý(ÓÉsysÌá¹©ÉèÖÃº¯ÊýSetEventCallBack())
 228   1        SetEventCallBack(enumEventKey, mykey_callback);       //¾ÙÀý
 229   1        SetEventCallBack(enumEventSys1mS, my1mS_callback);      //¾ÙÀý
 230   1        SetEventCallBack(enumEventSys10mS, my10mS_callback);    //¾ÙÀý
 231   1        SetEventCallBack(enumEventSys100mS, my100mS_callback);    //¾ÙÀý
 232   1        SetEventCallBack(enumEventSys1S, my1S_callback);      //¾ÙÀý
 233   1        SetEventCallBack(enumEventHall, myhall_callback);     //¾ÙÀý
 234   1        SetEventCallBack(enumEventNav, myKN_callback);        //¾ÙÀý£¬ÉèÖÃµ¼º½°´¼ü»Øµ÷º¯Êý
 235   1        SetEventCallBack(enumEventXADC, myADC_callback);      //À©Õ¹½Ó¿ÚÉÏÐÂµÄADÖµÊÂ¼þ
 236   1      
 237   1        //3,ÓÃ»§³ÌÐò×´Ì¬³õÊ¼»¯
 238   1        SetDisplayerArea(0, 7);                   //¾ÙÀý
 239   1        SetUart1Rxd(&rxd, sizeof(rxd), rxdhead, sizeof(rxdhead)); //ÉèÖÃ´®¿Ú½ÓÊÕ·½Ê½£ºÊý¾Ý°üÌõ¼þ£º½ÓÊÕÊý¾Ý°ü·ÅÖÃÔ
             -ÚrxdÖÐ£¬Êý¾Ý°ü´óÐ¡rxd´óÐ¡£¬Êý¾Ý°üÍ·ÐèÒªÓërxdheadÆ¥Åä£¬Æ¥ÅäÊýÁ¿rxdhead´óÐ¡
 240   1        SetUart2Rxd(&rxd, sizeof(rxd), rxdhead, sizeof(rxdhead));
 241   1        SetIrRxd(&rxd); //¾ÙÀý
 242   1      
 243   1        //4,ÓÃ»§³ÌÐò±äÁ¿³õÊ¼»¯
 244   1      
 245   1        funcmode = M24C02_Read(0x00);
 246   1        LedPrint(funcmode);
 247   1      
 248   1        /*****************  MySTC_OS ³õÊ¼»¯Óë¼ÓÔØ¿ªÊ¼  ********************************/
 249   1        MySTC_Init(); // MySTC_OS ³õÊ¼»¯         //´ËÐÐ±ØÐë£¡£¡£¡
 250   1        while (1)   // ÏµÍ³Ö÷Ñ­»·              //´ËÐÐ±ØÐë£¡£¡£¡
 251   1        {
 252   2          MySTC_OS(); // MySTC_OS ¼ÓÔØ           //´ËÐÐ±ØÐë£¡£¡£¡
 253   2                /*****************  MySTC_OS ³õÊ¼»¯Óë¼ÓÔØ½áÊø  ********************************/
 254   2      
 255   2          //******* ÓÃ»§³ÌÐò¶Î8£ºÓÃ»§main()º¯Êý£¨Ö÷Ñ­»·³ÌÐò£© *************//
 256   2      
 257   2        } //Ö÷Ñ­»·while(1)½áÊø         //´ËÐÐ±ØÐë£¡£¡£¡
 258   1      } //Ö÷º¯Êý main() ½áÊø         //´ËÐÐ±ØÐë£¡£¡£¡


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1627    ----
   CONSTANT SIZE    =     36    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     53      18
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
